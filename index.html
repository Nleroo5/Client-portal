<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Launch Portal - Drive Lead Media</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ===== FLOATING SIDEBAR ANIMATIONS ===== */
        .floating-sidebar {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(1, 46, 64, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #05908C;
            border-radius: 20px;
            padding: 20px 15px;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-50%) translateX(100px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            min-width: 80px;
        }

        .floating-sidebar.visible {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        .floating-sidebar.expanded {
            min-width: 160px;
        }

        .progress-overview {
            text-align: center;
            margin-bottom: 20px;
            color: #F2A922;
        }

        .progress-overview .current-step {
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(242, 169, 34, 0.5);
        }

        .progress-overview .total-steps {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .sidebar-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .sidebar-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 0.9rem;
            position: relative;
            border: 2px solid transparent;
        }

        .sidebar-step.completed {
            background: linear-gradient(135deg, #85C7B3, #05908C);
            color: #012E40;
            box-shadow: 0 0 15px rgba(133, 199, 179, 0.6);
            animation: completedPulse 2s infinite;
        }

        .sidebar-step.active {
            background: linear-gradient(135deg, #F2A922, #85C7B3);
            color: #012E40;
            box-shadow: 0 0 20px rgba(242, 169, 34, 0.8);
            animation: activePulse 1.5s infinite;
            transform: scale(1.1);
        }

        .sidebar-step.upcoming {
            background: rgba(85, 199, 179, 0.3);
            color: #85C7B3;
            border-color: #85C7B3;
        }

        .sidebar-step.locked {
            background: rgba(85, 199, 179, 0.1);
            color: rgba(85, 199, 179, 0.5);
            cursor: not-allowed;
        }

        .sidebar-step:hover:not(.locked) {
            transform: scale(1.2);
            box-shadow: 0 0 25px rgba(242, 169, 34, 0.5);
        }

        .step-label {
            position: absolute;
            right: 60px;
            background: rgba(1, 46, 64, 0.9);
            color: #EEF4D9;
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .floating-sidebar.expanded .step-label {
            opacity: 1;
            transform: translateX(0);
        }

        @keyframes completedPulse {
            0%, 100% { box-shadow: 0 0 15px rgba(133, 199, 179, 0.6); }
            50% { box-shadow: 0 0 25px rgba(133, 199, 179, 0.9); }
        }

        @keyframes activePulse {
            0%, 100% { box-shadow: 0 0 20px rgba(242, 169, 34, 0.8); }
            50% { box-shadow: 0 0 35px rgba(242, 169, 34, 1); }
        }

        /* ===== FIREWORKS & CELEBRATION ===== */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #fireworksCanvas.active {
            opacity: 1;
            pointer-events: all;
        }

        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.3);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .celebration-overlay.active {
            opacity: 1;
        }

        .celebration-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #F2A922;
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(242, 169, 34, 0.8);
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .celebration-message.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .celebration-subtitle {
            font-size: 1.2rem;
            margin-top: 20px;
            color: #85C7B3;
            opacity: 0;
            transition: opacity 0.6s ease 0.3s;
        }

        .celebration-subtitle.show {
            opacity: 1;
        }

        .btn-approve {
            background: linear-gradient(135deg, #F2A922 0%, #05908C 100%);
            color: #EEF4D9;
            font-size: 1.1rem;
            padding: 16px 32px;
            position: relative;
            overflow: hidden;
        }

        .btn-approve:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(242, 169, 34, 0.6);
        }

        .btn-approve.celebrating {
            animation: celebrateButton 0.5s ease;
        }

        @keyframes celebrateButton {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* ===== MOBILE RESPONSIVE ===== */
        @media (max-width: 768px) {
            .floating-sidebar {
                right: 10px;
                min-width: 60px;
                padding: 15px 10px;
            }

            .floating-sidebar.expanded {
                min-width: 140px;
            }

            .celebration-message {
                font-size: 2rem;
                padding: 0 20px;
            }
        }

        @media (max-width: 480px) {
            .floating-sidebar {
                display: none;
            }

            .celebration-message {
                font-size: 1.5rem;
            }
        }

        /* ===== REDUCED MOTION ===== */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Toggle Button -->
    <button class="admin-toggle" id="adminToggle" onclick="window.toggleAdminPanel()">ADMIN</button>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <h4>Admin Control Panel</h4>
        <div class="admin-form">
            <div id="adminLogin">
                <input type="password" id="adminPassword" placeholder="Enter admin password" autocomplete="new-password">
                <button id="loginBtn" onclick="window.adminLogin()">Login</button>
            </div>
            
            <div id="adminControls" style="display: none;">
                <!-- Creative Link Section -->
                <div class="admin-section">
                    <h5>Creative Preview Link</h5>
                    <input type="url" id="creativeLink" placeholder="Creative Preview Link (Google Drive, etc.)">
                    <button id="setCreativeLink" onclick="window.setCreativeLink()">Set Creative Link</button>
                    <button id="removeCreativeLink" class="danger" onclick="window.removeCreativeLink()">Remove Creative Link</button>
                </div>
                
                <hr>
                
                <!-- Google Drive Upload Link Section -->
                <div class="admin-section">
                    <h5>Brand Kit Upload Link</h5>
                    <input type="url" id="googleDriveLink" placeholder="Google Drive Upload/Folder Link">
                    <button id="setGoogleDriveLink" onclick="window.setGoogleDriveLink()">Set Upload Link</button>
                    <button id="removeGoogleDriveLink" class="danger" onclick="window.removeGoogleDriveLink()">Reset to Default</button>
                </div>
                
                <hr>
                
                <!-- Stripe Payment Links Section -->
                <div class="admin-section">
                    <h5>Payment Links</h5>
                    
                    <!-- 6-Month Payment Links -->
                    <div class="payment-links-group">
                        <h6>6-Month SOW:</h6>
                        <div class="payment-link-row">
                            <label>Monthly:</label>
                            <input type="url" id="stripe6Monthly" placeholder="6-month monthly payment link">
                            <div class="button-row">
                                <button onclick="window.setStripeLink('sow6', 'monthly')">Set</button>
                                <button class="danger small" onclick="window.removeStripeLink('sow6', 'monthly')">Reset</button>
                            </div>
                        </div>
                        <div class="payment-link-row">
                            <label>Upfront:</label>
                            <input type="url" id="stripe6Upfront" placeholder="6-month upfront payment link">
                            <div class="button-row">
                                <button onclick="window.setStripeLink('sow6', 'upfront')">Set</button>
                                <button class="danger small" onclick="window.removeStripeLink('sow6', 'upfront')">Reset</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 12-Month Payment Links -->
                    <div class="payment-links-group">
                        <h6>12-Month SOW:</h6>
                        <div class="payment-link-row">
                            <label>Monthly:</label>
                            <input type="url" id="stripe12Monthly" placeholder="12-month monthly payment link">
                            <div class="button-row">
                                <button onclick="window.setStripeLink('sow12', 'monthly')">Set</button>
                                <button class="danger small" onclick="window.removeStripeLink('sow12', 'monthly')">Reset</button>
                            </div>
                        </div>
                        <div class="payment-link-row">
                            <label>Upfront:</label>
                            <input type="url" id="stripe12Upfront" placeholder="12-month upfront payment link">
                            <div class="button-row">
                                <button onclick="window.setStripeLink('sow12', 'upfront')">Set</button>
                                <button class="danger small" onclick="window.removeStripeLink('sow12', 'upfront')">Reset</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="adminStatus" class="admin-status"></div>
        </div>
    </div>

    <!-- Floating Sidebar -->
    <div class="floating-sidebar" id="floatingSidebar">
        <div class="progress-overview">
            <div class="current-step" id="currentStepDisplay">1</div>
            <div class="total-steps">of 5</div>
        </div>
        <div class="sidebar-steps" id="sidebarSteps">
            <!-- Steps will be generated by JavaScript -->
        </div>
    </div>

    <!-- Fireworks Canvas -->
    <canvas id="fireworksCanvas"></canvas>

    <!-- Celebration Overlay -->
    <div class="celebration-overlay" id="celebrationOverlay">
        <div class="celebration-message" id="celebrationMessage">
            🎉 APPROVED FOR LAUNCH! 🎉
            <div class="celebration-subtitle" id="celebrationSubtitle">
                Your campaign will be live within 24-48 hours!
            </div>
        </div>
    </div>

    <div class="portal-container">
        <!-- Hero Section -->
        <div class="hero">
            <h1>Client Launch Portal</h1>
            <p>Complete each step. We'll handle the rest.</p>
            
            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">0 of 5 steps completed</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
        </div>

        <!-- Success Message (hidden initially) -->
        <div class="success-message" id="successMessage" style="display: none;">
            <h3>🎉 Launch Complete!</h3>
            <p>All steps completed successfully. Your campaign will be live within 24-48 hours.</p>
        </div>

        <!-- Step 1: Sign Agreements -->
        <div class="step" id="step1">
            <div class="step-header">
                <div>
                    <h2>Sign Your Agreements</h2>
                    <div class="step-note">You'll receive copies automatically by email.</div>
                </div>
                <div class="step-number">1</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 20px;">
                    <a href="#" class="btn" id="msaBtn" data-dlm-event="open_msa" target="_blank" rel="noopener">
                        Sign MSA
                    </a>
                    <a href="#" class="btn" id="dpaBtn" data-dlm-event="open_dpa" target="_blank" rel="noopener">
                        Sign DPA
                    </a>
                </div>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="sow6" name="sowTerm" value="6" checked>
                        <label for="sow6">6-month term</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="sow12" name="sowTerm" value="12">
                        <label for="sow12">12-month term</label>
                    </div>
                </div>
                <a href="#" class="btn" id="sowBtn" data-dlm-event="open_sow" target="_blank" rel="noopener">
                    Sign SOW (6-month)
                </a>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(1)">Mark Step 1 Complete</button>
            </div>
        </div>

        <!-- Step 2: Set Up Payment -->
        <div class="step locked" id="step2">
            <div class="step-header">
                <div>
                    <h2>Set Up Payment</h2>
                    <div class="step-note">Secure payment processing via Stripe. All major payment methods accepted.</div>
                </div>
                <div class="step-number">2</div>
            </div>
            <div class="step-content">
                <!-- Payment Term Display -->
                <div class="payment-term-display" id="paymentTermDisplay">
                    <h4 style="color: #012E40; margin-bottom: 15px;">
                        <span id="paymentTermText">6-Month</span> Payment Options
                    </h4>
                </div>

                <!-- Payment Options -->
                <div class="radio-group" style="margin-bottom: 20px;">
                    <div class="radio-item">
                        <input type="radio" id="paymentMonthly" name="paymentType" value="monthly" checked>
                        <label for="paymentMonthly">Pay Monthly</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="paymentUpfront" name="paymentType" value="upfront">
                        <label for="paymentUpfront">Pay All Upfront <span class="discount-tag">(5% Discount)</span></label>
                    </div>
                </div>

                <!-- Payment Button -->
                <a href="#" class="btn" id="stripeBtn" data-dlm-event="open_stripe" target="_blank" rel="noopener">
                    Set Up Monthly Payment
                </a>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(2)">Mark Step 2 Complete</button>
            </div>
        </div>

        <!-- Step 3: Meta Access & Brand Kit -->
        <div class="step locked" id="step3">
            <div class="step-header">
                <div>
                    <h2>Meta Access & Brand Kit</h2>
                </div>
                <div class="step-number">3</div>
            </div>
            <div class="step-content">
                <!-- Meta Business Suite Check -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #012E40; margin-bottom: 15px;">Meta Business Suite Setup</h4>
                    <p style="color: #012E40; margin-bottom: 15px;">We need admin access to manage your ads and tracking. First, let us know your setup:</p>
                    
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="hasBusinessSuite" name="metaSetup" value="yes">
                            <label for="hasBusinessSuite">Yes, I have Meta Business Suite set up</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="noBusinessSuite" name="metaSetup" value="no">
                            <label for="noBusinessSuite">No, I don't have Meta Business Suite</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="unsureBusinessSuite" name="metaSetup" value="unsure">
                            <label for="unsureBusinessSuite">I'm not sure</label>
                        </div>
                    </div>
                </div>

                <!-- Instructions for existing Business Suite users -->
                <div id="existingBusinessSuite" style="display: none; background: #DFF5F3; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #85C7B3;">
                    <h5 style="color: #012E40; margin-bottom: 15px;">How to Grant Drive Lead Media Access to Your Meta Business Suite</h5>
                    
                    <div style="color: #012E40; line-height: 1.6;">
                        <p style="margin-bottom: 12px;"><strong>Step 1: Open Meta Business Suite</strong><br>
                        Go to business.facebook.com and log in with your Facebook account</p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 2: Access Business Settings</strong><br>
                        Click "Business Settings" in the top menu</p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 3: Go to People Section</strong><br>
                        In the left sidebar, click "Users" then click "People"</p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 4: Add New User</strong><br>
                        Click the "Add" button</p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 5: Enter Our Email</strong><br>
                        Type: <strong id="metaEmailDisplay">Nicolas@driveleadmedia.com</strong></p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 6: Grant Admin Access</strong><br>
                        Select "Admin" role when prompted for permissions</p>
                        
                        <p style="margin-bottom: 12px;"><strong>Step 7: Send Invitation</strong><br>
                        Click "Invite" to send the access request</p>
                        
                        <p style="margin-bottom: 15px;"><strong>That's it!</strong><br>
                        We'll receive an email notification and accept the invitation. Once accepted, we can begin setting up and managing your advertising campaigns</p>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <a href="https://business.facebook.com" class="btn" target="_blank" rel="noopener">
                            Open Meta Business Suite
                        </a>
                    </div>
                </div>

                <!-- Instructions for users without Business Suite -->
                <div id="newBusinessSuite" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">We'll Call at Your Convenience:</h5>
                    <p style="color: #012E40; margin-bottom: 15px;">Meta Business Suite setup is easier when we do it together. Share your best days and times for a 10-15 minute setup call.</p>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #012E40;">Preferred Days:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupMon" name="setupDays" value="Monday">
                                Mon
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupTue" name="setupDays" value="Tuesday">
                                Tue
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupWed" name="setupDays" value="Wednesday">
                                Wed
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupThu" name="setupDays" value="Thursday">
                                Thu
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupFri" name="setupDays" value="Friday">
                                Fri
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupSat" name="setupDays" value="Saturday">
                                Sat
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; color: #012E40; font-weight: normal;">
                                <input type="checkbox" id="setupSun" name="setupDays" value="Sunday">
                                Sun
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="setupTime">Best Time:</label>
                        <select id="setupTime">
                            <option value="">Select time range</option>
                            <option value="morning">Morning (9am-12pm)</option>
                            <option value="afternoon">Afternoon (12pm-5pm)</option>
                            <option value="evening">Evening (5pm-8pm)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="setupPhone">Phone Number:</label>
                        <input type="tel" id="setupPhone" placeholder="(555) 123-4567">
                    </div>

                    <div class="form-group">
                        <label for="setupTimezone">Time Zone:</label>
                        <select id="setupTimezone">
                            <option value="">Select time zone</option>
                            <option value="ET">Eastern Time (ET)</option>
                            <option value="CT">Central Time (CT)</option>
                            <option value="MT">Mountain Time (MT)</option>
                            <option value="PT">Pacific Time (PT)</option>
                        </select>
                    </div>

                    <button class="btn btn-secondary" id="setupHelpBtn">
                        Schedule Setup Call
                    </button>
                </div>

                <!-- Instructions for unsure users -->
                <div id="unsureBusinessSuiteDiv" style="display: none; background: #F0F9F7; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #85C7B3;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">Let's Check Together:</h5>
                    <p style="color: #012E40; margin-bottom: 15px;">Not sure if you have Meta Business Suite? We'll help you check and set up access in just a few minutes.</p>

                    <div style="background: #DFF5F3; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #05908C;">
                        <h6 style="color: #012E40; margin-bottom: 10px; font-weight: 600;">Quick 30-Second Check:</h6>
                        <ol style="color: #012E40; margin-left: 20px; line-height: 1.6; margin-bottom: 0;">
                            <li>Go to <strong>business.facebook.com</strong></li>
                            <li>Try logging in with your Facebook account</li>
                            <li>If you see a business dashboard with your Facebook page listed → <strong>you have it! Select "Yes" above</strong></li>
                            <li>If it asks you to "Create Account" or shows a setup screen → <strong>you don't have it yet! Select "No" above</strong></li>
                        </ol>
                    </div>

                    <p style="color: #012E40; margin: 15px 0 0 0; font-size: 0.9rem; font-style: italic;">
                        After checking, please go back and select either "Yes" or "No" above to continue with the appropriate setup.
                    </p>
                </div>

                <!-- Brand Kit Upload Section -->
                <div style="margin: 30px 0 20px 0; border-top: 2px solid rgba(133, 199, 179, 0.3); padding-top: 25px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
                        <h4 style="color: #012E40; margin: 0;">📁 Brand Kit Upload:</h4>
                        <button class="btn btn-small btn-outline" id="brandKitInfoBtn" style="font-size: 0.8rem; padding: 4px 12px;">
                            What is a brand kit?
                        </button>
                    </div>
                    
                    <!-- Brand Kit Explanation (hidden initially) -->
                    <div id="brandKitInfo" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                        <h5 style="color: #012E40; margin-bottom: 10px;">Your Brand Kit Should Include:</h5>
                        <div class="brand-kit-grid">
                            <div>
                                <h6 style="color: #012E40; margin-bottom: 8px; font-weight: 600;">🌈 Color Palette:</h6>
                                <ul style="margin-left: 15px; color: #012E40; line-height: 1.5;">
                                    <li>Brand colors (hex codes like #012E40)</li>
                                    <li>Color palette document or screenshot</li>
                                    <li>Brand guidelines PDF (if available)</li>
                                </ul>
                            </div>
                        </div>
