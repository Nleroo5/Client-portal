<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Launch Portal - Drive Lead Media (Contract)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Young+Serif:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #012E40 0%, #05908C 100%); display: flex; align-items: center; justify-content: center; z-index: 999999;">
        <div style="text-align: center; color: #EEF4D9;">
            <h2 style="font-family: 'Young Serif', serif; margin-bottom: 20px;">Loading Portal...</h2>
            <div style="width: 50px; height: 50px; border: 3px solid #EEF4D9; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        </div>
    </div>
    
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>

    <!-- Floating Progress Sidebar -->
    <div class="floating-progress-sidebar" id="floatingProgressSidebar">
        <div class="sidebar-progress-header">
            <div class="progress-percentage-circle">
                <svg>
                    <circle class="background" cx="25" cy="25" r="20"></circle>
                    <circle class="progress" id="sidebarProgressCircle" cx="25" cy="25" r="20" 
                            stroke-dasharray="126" stroke-dashoffset="126"></circle>
                </svg>
                <div class="progress-percentage-text" id="sidebarProgressPercent">0%</div>
            </div>
            <div class="progress-message" id="sidebarProgressMessage">Let's get started!</div>
        </div>
        <div class="sidebar-steps-track">
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble1">1</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Agreements</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble2">2</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Payment</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble3">3</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Meta Setup</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble4">4</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Tracking</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble5">5</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Approval</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Admin Button (Floating) -->
    <button id="messageAdminBtn" style="
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, #F2A922 0%, #e09819 100%);
        color: #000000;
        border: 2px solid #000000;
        border-radius: 50px;
        padding: 16px 28px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(242, 169, 34, 0.4);
        transition: all 0.2s ease;
        z-index: 9999;
        display: flex;
        align-items: center;
        gap: 8px;
    "
    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(242, 169, 34, 0.5)'"
    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(242, 169, 34, 0.4)'"
    onclick="toggleChatPanel()">
        💬 Message Admin
        <span id="clientUnreadBadge" style="display: none; background: #ef4444; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; display: none; align-items: center; justify-content: center;"></span>
    </button>

    <!-- Chat Panel (Sliding) -->
    <div id="chatPanel" style="
        position: fixed;
        bottom: 0;
        right: -400px;
        width: 400px;
        height: 600px;
        background: #E8F5F3;
        border: 2px solid #000000;
        border-radius: 12px 0 0 0;
        box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
        transition: right 0.3s ease;
        z-index: 10000;
        display: flex;
        flex-direction: column;
    ">
        <!-- Chat Header -->
        <div style="background: rgba(5, 144, 140, 0.7); padding: 16px 20px; border-bottom: 2px solid #000000; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 0 0 0;">
            <h3 style="margin: 0; color: #000000; font-size: 1.1rem; font-weight: 600;">Message Admin</h3>
            <button onclick="toggleChatPanel()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #000000; padding: 0; line-height: 1;">&times;</button>
        </div>

        <!-- Messages Area -->
        <div id="clientChatMessages" style="flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px;">
            <div style="text-align: center; padding: 40px 20px; color: #64748B;">
                Loading messages...
            </div>
        </div>

        <!-- Message Input -->
        <div style="padding: 16px 20px; border-top: 2px solid #000000; background: rgba(255, 255, 255, 0.5);">
            <form id="clientMessageForm" style="display: flex; gap: 10px;">
                <input
                    type="text"
                    id="clientMessageInput"
                    placeholder="Type your message..."
                    required
                    style="flex: 1; padding: 12px; border: 1px solid #000000; border-radius: 8px; font-size: 0.9rem; background: white;"
                >
                <button type="submit" style="
                    background: linear-gradient(135deg, #05908C 0%, #047a72 100%);
                    color: #000000;
                    border: 1px solid #000000;
                    border-radius: 8px;
                    padding: 12px 20px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s ease;
                ">Send</button>
            </form>
        </div>
    </div>

    <div class="portal-container">
        <!-- Hero Section -->
        <div class="hero">
            <h1>Client Launch Portal</h1>
            <p>Complete each step. We'll handle the rest.</p>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">0 of 5 steps completed</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage" style="display: none;">
            <h3>🎉 Launch Complete!</h3>
            <p>All steps completed successfully. Your campaign will be live within 24-48 hours.</p>
        </div>

        <!-- Step 1: Sign Agreements -->
        <div class="step" id="step1">
            <div class="step-header">
                <div>
                    <h2>Sign Your Agreements</h2>
                    <div class="step-note">You'll receive copies automatically by email.</div>
                </div>
                <div class="step-number">1</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 20px;">
                    <a href="#" class="btn" id="dpaBtn" target="_blank" rel="noopener">
                        Sign DPA (Data Processing Agreement)
                    </a>
                </div>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="service6" name="serviceTerm" value="6" checked>
                        <label for="service6">6-month service agreement</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="service12" name="serviceTerm" value="12">
                        <label for="service12">12-month service agreement</label>
                    </div>
                </div>
                <a href="#" class="btn" id="serviceBtn" target="_blank" rel="noopener">
                    Sign Service Agreement (6-month)
                </a>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(1)">Mark Step 1 Complete</button>
            </div>
        </div>

        <!-- Step 2: Set Up Payment -->
        <div class="step locked" id="step2">
            <div class="step-header">
                <div>
                    <h2>Set Up Payment</h2>
                    <div class="step-note">Secure payment processing via Stripe. All major payment methods accepted.</div>
                </div>
                <div class="step-number">2</div>
            </div>
            <div class="step-content">
                <div class="payment-term-display">
                    <h4 style="color: #012E40; margin: 0;">
                        <span id="paymentTermText">6-Month</span> Payment Options
                    </h4>
                </div>
                
                <div class="radio-group" style="margin-bottom: 20px;">
                    <div class="radio-item">
                        <input type="radio" id="paymentMonthly" name="paymentType" value="monthly" checked>
                        <label for="paymentMonthly">Pay Monthly</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="paymentUpfront" name="paymentType" value="upfront">
                        <label for="paymentUpfront">Pay All Upfront <span class="discount-tag">5% Discount</span></label>
                    </div>
                </div>
                
                <a href="#" class="btn" id="stripeBtn" target="_blank" rel="noopener">
                    Set Up Monthly Payment
                </a>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(2)">Mark Step 2 Complete</button>
            </div>
        </div>

        <!-- Step 3: Meta Access & Brand Kit -->
        <div class="step locked" id="step3">
            <div class="step-header">
                <div>
                    <h2>Meta Access & Brand Kit</h2>
                </div>
                <div class="step-number">3</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #012E40; margin-bottom: 15px;">Meta Business Suite Setup</h4>
                    <p style="color: #012E40; margin-bottom: 15px;">Let's handle this together - I'll walk you through the setup step-by-step.</p>
                    
                    <div style="background: #DFF5F3; padding: 25px; border-radius: 12px; border: 2px solid #85C7B3; text-align: center; max-width: 450px; margin: 0 auto;">
                        <img src="https://www.driveleadmedia.com/s/IMG_1337.png" 
                             alt="Nicolas - Drive Lead Media" 
                             style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 15px; border: 3px solid #05908C;">
                        
                        <h5 style="color: #012E40; margin-bottom: 10px;">Call Nicolas</h5>
                        
                        <div style="background: #05908C; color: #EEF4D9; padding: 12px 20px; border-radius: 8px; margin: 15px 0; font-size: 1.1rem; font-weight: 700;">
                            <a href="tel:+16786506411" style="color: #EEF4D9; text-decoration: none;">
                                (678) 650-6411
                            </a>
                        </div>
                        
                        <div style="color: #012E40; font-size: 0.9rem; line-height: 1.5;">
                            <p style="margin-bottom: 5px;"><strong>Available:</strong> 9am - 5pm, Mon-Sat</p>
                            <p style="margin-bottom: 10px;"><strong>Call Duration:</strong> ~15 minutes</p>
                            
                            <div style="background: rgba(242, 169, 34, 0.1); padding: 10px; border-radius: 6px; border-left: 3px solid #F2A922; margin-top: 10px;">
                                <p style="margin: 0; font-size: 0.85rem;">
                                    If I don't answer, shoot me a text or leave a voicemail - I'll get right back to you.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Brand Kit Upload Section -->
                <div style="margin: 30px 0 20px 0; border-top: 2px solid rgba(133, 199, 179, 0.3); padding-top: 25px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
                        <h4 style="color: #012E40; margin: 0;">📁 Brand Kit Upload:</h4>
                        <button class="btn btn-small btn-outline" id="brandKitInfoBtn" style="font-size: 0.8rem; padding: 4px 12px;" onclick="window.toggleBrandKitInfo()">
                            What is a brand kit?
                        </button>
                    </div>
                    
                    <!-- Brand Kit Explanation (hidden initially) -->
                    <div id="brandKitInfo" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                        <h5 style="color: #012E40; margin-bottom: 10px;">Your Brand Kit Should Include:</h5>
                        <div class="brand-kit-grid">
                            <div>
                                <h6 style="color: #012E40; margin-bottom: 8px; font-weight: 600;">🎨 Logo Files:</h6>
                                <ul style="margin-left: 15px; color: #012E40; line-height: 1.5;">
                                    <li>High-resolution logo PNG (transparent background)</li>
                                    <li>Logo variations (if available)</li>
                                </ul>
                                <p style="color: #012E40; margin-top: 8px; font-size: 0.9rem; font-style: italic;">
                                    We can work with whatever you have, but the more options you provide, the more creative flexibility we'll have to make your ads stand out
                                </p>
                            </div>
                            <div>
                                <h6 style="color: #012E40; margin-bottom: 8px; font-weight: 600;">🌈 Color Palette:</h6>
                                <ul style="margin-left: 15px; color: #012E40; line-height: 1.5;">
                                    <li>Brand colors (hex codes like #012E40)</li>
                                    <li>Color palette document or screenshot</li>
                                    <li>Brand guidelines PDF (if available)</li>
                                </ul>
                            </div>
                        </div>
                        <div style="background: #DFF5F3; padding: 15px; border-radius: 6px; border-left: 3px solid #05908C;">
                            <p style="color: #012E40; margin: 0; font-size: 0.9rem;">
                                <strong>💡 Don't have all of these?</strong> No worries! Upload whatever you have. Even just a logo PNG and your main brand colors will help us create ads that match your brand perfectly.
                            </p>
                        </div>
                    </div>
                    
                    <p style="color: #012E40; margin-bottom: 15px;">Upload your logos, brand guidelines, fonts, and any existing creative assets so we can create ads that perfectly match your brand.</p>
                    <a href="https://drive.google.com/drive/folders/1jds7K6SdV6G_SwTyZZjxqjuftqIHiaPY?usp=sharing" 
                       class="btn btn-outline" id="uploadBtn" target="_blank" rel="noopener">
                        Upload Brand Assets
                    </a>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(3)">Mark Step 3 Complete</button>
            </div>
        </div>

        <!-- Step 4: Website Access for Tracking -->
        <div class="step locked" id="step4">
            <div class="step-header">
                <div>
                    <h2>Website Access for Tracking</h2>
                    <div class="step-note">We install GA4 and Meta Pixel (no PHI). We handle all technical setup - you just provide access.</div>
                </div>
                <div class="step-number">4</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #012E40; margin-bottom: 15px;">🖥️ Website Access Needed</h4>
                    <p style="color: #012E40; margin-bottom: 15px;">Choose the easiest option for you:</p>
                    
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="connectWebAdmin" name="websiteAccess" value="connect" checked>
                            <label for="connectWebAdmin">Connect us with your website admin/developer</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="tempAccess" name="websiteAccess" value="temporary">
                            <label for="tempAccess">Grant us temporary website access</label>
                        </div>
                    </div>
                </div>

                <!-- Connect with website admin -->
                <div id="connectAdminForm" style="background: #DFF5F3; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #85C7B3;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">Website Admin Contact:</h5>
                    <div class="form-group">
                        <label for="adminName">Admin/Developer Name</label>
                        <input type="text" id="adminName">
                    </div>
                    <div class="form-group">
                        <label for="adminEmail">Admin Email *</label>
                        <input type="email" id="adminEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPhone">Admin Phone </label>
                        <input type="tel" id="adminPhone">
                    </div>
                    <div class="form-group">
                        <label for="websitePlatform">Website Platform</label>
                        <select id="websitePlatform">
                            <option value="">Select platform</option>
                            <option value="wordpress">WordPress</option>
                            <option value="squarespace">Squarespace</option>
                            <option value="wix">Wix</option>
                            <option value="shopify">Shopify</option>
                            <option value="webflow">Webflow</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="text" id="websitePlatformOther" placeholder="Please specify..." style="display: none; margin-top: 10px;">
                    </div>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>We'll contact them directly</strong> to coordinate tracking installation.
                    </p>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-secondary btn-small" onclick="window.emailAdminDetails()">Email Admin Details to Us</button>
                    </div>
                </div>

                <!-- Temporary access form (hidden by default) -->
                <div id="tempAccessForm" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">Temporary Website Access:</h5>
                    <div class="form-group">
                        <label for="websiteUrl">Website URL *</label>
                        <input type="url" id="websiteUrl" placeholder="https://yourwebsite.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginUrl">Login URL</label>
                        <input type="url" id="loginUrl" placeholder="https://yourwebsite.com/wp-admin">
                    </div>
                    <div class="form-group">
                        <label for="tempUsername">Admin Username *</label>
                        <input type="text" id="tempUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="tempPassword">Admin Password *</label>
                        <input type="password" id="tempPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="sitePlatform">Website Platform</label>
                        <select id="sitePlatform">
                            <option value="">Select platform</option>
                            <option value="wordpress">WordPress</option>
                            <option value="squarespace">Squarespace</option>
                            <option value="wix">Wix</option>
                            <option value="shopify">Shopify</option>
                            <option value="webflow">Webflow</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="text" id="sitePlatformOther" placeholder="Please specify..." style="display: none; margin-top: 10px;">
                    </div>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>🔒 Secure:</strong> We'll install tracking and remove our access immediately. You can change the password afterward.
                    </p>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-secondary btn-small" onclick="window.emailAccessDetails()">Send Access Details Securely</button>
                    </div>
                </div>

                <div style="margin-top: 25px; background: #F0F9F7; padding: 15px; border-radius: 8px;">
                    <div class="info-header">
                        <h5>What We Install:</h5>
                        <button class="btn-info" onclick="window.toggleGA4Info()">What is GA4?</button>
                        <button class="btn-info" onclick="window.togglePixelInfo()">What is Meta Pixel?</button>
                    </div>
                    
                    <!-- GA4 Explanation (hidden initially) -->
                    <div id="ga4Info" class="info-box">
                        <h6>Google Analytics 4 (GA4):</h6>
                        <p>
                            GA4 tracks how people find and use your website. It shows us which ads bring the most visitors, what pages they look at, and what actions they take (like calling your office or filling out forms). This helps us improve your ads to get better results. <strong>No personal health information is tracked.</strong>
                        </p>
                    </div>

                    <!-- Meta Pixel Explanation (hidden initially) -->
                    <div id="pixelInfo" class="info-box warning">
                        <h6>Meta Pixel (Facebook/Instagram):</h6>
                        <p>
                            Meta Pixel tracks when people visit your website after seeing your Facebook or Instagram ads. It helps us find more people similar to your best customers and shows ads to people who visited your website but didn't book an appointment yet. <strong>No personal health information is tracked.</strong>
                        </p>
                    </div>

                    <ul style="margin-left: 20px; color: #012E40; line-height: 1.6;">
                        <li>✓ Google Analytics 4 (GA4) tracking code</li>
                        <li>✓ Meta Pixel tracking code</li>
                        <li>✓ Conversion tracking setup</li>
                        <li>✓ Testing to ensure everything works</li>
                    </ul>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>Timeline:</strong> Completed within 24-48 hours of receiving access.
                    </p>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(4)">Mark Step 4 Complete</button>
            </div>
        </div>

        <!-- Step 5: Creative Approval -->
        <div class="step locked" id="step5">
            <div class="step-header">
                <div>
                    <h2>Creative Approval</h2>
                    <div class="step-note">Your Launch Bundle: 1 actor video, 1 animated video, 2 image ads.</div>
                </div>
                <div class="step-number">5</div>
            </div>
            <div class="step-content">
                <div class="gallery-placeholder" id="galleryPlaceholder">
                    <p>Creative previews will be shared via secure link</p>
                    <p style="font-size: 0.9rem; color: #85C7B3; margin-top: 10px;">
                        Links will be provided once creatives are ready for review
                    </p>
                </div>
                
                <div style="margin: 20px 0;">
                    <button class="btn btn-secondary" onclick="window.approveCreatives()">
                        🚀 Approve to Launch
                    </button>
                    <button class="btn btn-outline" onclick="window.requestRevisions()">
                        Request Revisions
                    </button>
                </div>
                
                <!-- Revision Form (hidden) -->
                <div id="revisionForm" style="display: none; background: #DFF5F3; padding: 20px; border-radius: 8px; margin-top: 15px; border: 1px solid #85C7B3;">
                    <h4 style="color: #012E40;">Request Revisions</h4>
                    <div class="form-group">
                        <label for="revisionNotes">Revision Notes</label>
                        <textarea id="revisionNotes" rows="4" placeholder="Please describe the changes..."></textarea>
                    </div>
                    <button class="btn" onclick="window.submitRevisions()">Submit Revisions</button>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(5)">Mark Step 5 Complete</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="portal-footer">
            <p>Drive Lead Media — We never process PHI. All analytics used solely for advertising performance.</p>
            <div class="footer-links">
                <span id="contactEmail">Nicolas@driveleadmedia.com</span>
                <span>•</span>
                <span id="contactPhone">(678) 650-6411</span>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <!-- Configuration -->
    <script src="config.js"></script>
    
    <!-- Main Functions -->
    <script src="client-functions.js"></script>
</body>
</html>
